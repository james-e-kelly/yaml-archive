################################################################################
#                                                                              #
#          Appveyor "continuous integration" configuration file                #
#                                                                              #
################################################################################

# Environment variables. Every item in the sequence (delimited by dashes) gives
# us another build in the build matrix.
environment:
  matrix:
    - BOOST_VERSION_MINOR: 63
      BUILD_SHARED_LIBS: ON
    - BOOST_VERSION_MINOR: 63
      BUILD_SHARED_LIBS: OFF
    - BOOST_VERSION_MINOR: 60
      BUILD_SHARED_LIBS: ON
    - BOOST_VERSION_MINOR: 60
      BUILD_SHARED_LIBS: OFF

# Build both 32 and 64 bit versions.
platform:
  - x86
  - x64

# MSVC configurations.
configuration:
  - Debug
  - Release

install:
  # Appveyor has the following boost libraries installed:
  # 1.63.0 (C:\Libraries\boost_1_63_0)
  # 1.62.0 (C:\Libraries\boost_1_62_0)
  # 1.60.0 (C:\Libraries\boost_1_60_0)
  # 1.59.0 (C:\Libraries\boost_1_59_0)
  # 1.58.0 (C:\Libraries\boost_1_58_0)
  # 1.56.0 (C:\Libraries\boost)
  # See: https://www.appveyor.com/docs/installed-software/#languages-libraries-frameworks
  - cmd: setx /M PATH "%PATH%;C:\Libraries\boost_1_%BOOST_VERSION_MINOR%_0\stage\lib"
  - cmd: echo %PATH%
  - python build.py before-install install

before_build: python build.py before-build
build_script: python build.py build
after_build:  python build.py after_build
before_test:  python build.py before_test
test_script:  python build.py test
after_test:   python build.py after-test
on_success:   python build.py after-success
on_failure:   python build.py after-failure
on_finish:
